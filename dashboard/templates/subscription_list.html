{% extends "base.html" %}

{% block title %}Subscription History{% endblock %}

{% block content %}
<div class="pagetitle">
  <h1>Subscription History</h1>
  <p>
    <strong>{{ member.first_name }} {{ member.last_name }}</strong> |
    {{ member.mobile }}
  </p>
</div>

<section class="section">
  <div class="card">
    <div class="card-body">

      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Plan</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Duration</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for sub in subscriptions %}
          <tr>
            <td>{{ sub.plan.name }}</td>
            <td>{{ sub.start_date }}</td>
            <td>{{ sub.end_date }}</td>
            <td>
              {{ sub.plan.duration_days }} days
            </td>
            <td>
              {% if sub.status == 'active' %}
                <span class="badge bg-success">Active</span>
              {% elif sub.status == 'expired' %}
                <span class="badge bg-secondary">Expired</span>
              {% else %}
                <span class="badge bg-warning">Cancelled</span>
              {% endif %}
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="text-center text-muted">
              No subscriptions found.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="mt-3">
        <a href="{% url 'dashboard:member_payments' member.id %}"
           class="btn btn-outline-primary">
          View Payments
        </a>
        <a href="{% url 'dashboard:add_payment' member.id %}"
           class="btn btn-success">
          Add Payment
        </a>
      </div>

    </div>
  </div>
</section>
{% endblock %}
